module M
  use import bv.BV8
  use import int.Int

  use import int.NumOf

  meta "encoding : kept" type t

  let ghost step1 (n x1 : t) (i : int) : unit
  =
    assert { let i' = of_int i in
             let twoi = mul (2 : t) i' in
                 to_uint (bw_and (lsr_bv x1 twoi) (0x03 : t))
               = numof (nth n) (to_uint twoi) (to_uint twoi + 2) }

end